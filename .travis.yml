langauge: ruby
sudo: false
cache:
  bundler: true
rbenv:
- 2.5.3
addons:
  postgresql: 9.6
  chrome: stable
dist: xenial
before_install:
- yes | gem update --system --force
- gem install bundler
script:
- yarn
- bundle exec rails db:{create,migrate} RAILS_ENV=test
- bundle exec rspec
deploy:
  provider: heroku
  app: thoughtful-traveler
  on:
    repo: tylertomlinson/thoughtful_traveler
  run: rails db:migrate
